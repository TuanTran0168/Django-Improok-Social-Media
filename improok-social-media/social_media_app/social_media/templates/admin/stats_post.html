{% extends 'admin/base_site.html' %}

{% load static %}

{% block extrahead %}
<link rel="stylesheet" type="text/css" href="{% static 'css/stats_post.css' %}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
{% endblock %}

{% block content %}
<h1 class="big-title">THỐNG KÊ MẠNG XÃ HỘI TRỰC TUYẾN</h1>

<form method="get" class="form">
    <label for="start_date">Ngày bắt đầu:</label>
    <input type="date" id="start_date" name="start_date">

    <label for="end_date">Ngày kết thúc:</label>
    <input type="date" id="end_date" name="end_date">

    <button type="submit">Lọc</button>
</form>

<div class="main-stats">

    <table class="table table-hover table-primary my-table-stats-post">
        <thead>
            <tr>
              <th scope="col">Mã bài viết</th>
              <th scope="col">Nội dung bài viết</th>
              <th scope="col">Chủ bài viết</th>
              <th scope="col">Số lượt tương tác</th>
            </tr>
        </thead>
        <tbody>
            {% for s in top_posts_reaction %}
            <tr>
                <th scope="row">{{s.id}}</th>
                <td>{{s.post_content}}</td>
                <td>{{s.account_id__user__first_name}} {{s.account_id__user__last_name}}</td>
                <td>{{s.reaction_count}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <table class="table table-hover table-primary my-table-stats-post">
        <thead>
            <tr>
              <th scope="col">Mã bài viết</th>
              <th scope="col">Nội dung bài viết</th>
              <th scope="col">Chủ bài viết</th>
              <th scope="col">Số lượt bình luận</th>
            </tr>
        </thead>
        <tbody>
            {% for s in top_posts_comment %}
            <tr>
                <th scope="row">{{s.id}}</th>
                <td>{{s.post_content}}</td>
                <td>{{s.account_id__user__first_name}} {{s.account_id__user__last_name}}</td>
                <td>{{s.reaction_count}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="button-href my-button">
    <a href="/admin/stats-admin/" class="button-href">
        <button type="submit" class="button">Thống kê người dùng</button>
    </a>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

{% endblock %}
